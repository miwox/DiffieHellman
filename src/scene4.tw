:: Scene4 [bild]{"position":"175,700","size":"100,100"}
#Diffie Hellman The Game
(display:"Sidebar1")\
(set: _text1 to "Bob woke up in a cold sweat. What was that ? Why did he remember that day ? He looked at the letter in his hands. The cat on the back had disappeared. How was that possible ? He had been trying to hunt a madman for so long, would he become one himself now? ")\
(set: _text2 to "He shook all over and poured himself a glass of whiskey. His nerves had to calm down first. He opened the letter and found a sequence of letters and numbers ending with an equal sign.<br><br>[[GetAnAnswer->PGScene]]")\
(set: _holder to "Continue...")\
(set: $blocker to false)
<div class="storyteller">\
($continueTextClick: _text1, _holder, (print: _text2))\
</div>
<script>
window.evaluatePrimeAndNumber = function(){
    //get the user input for prime and number
       let prime = document.getElementById('prime').value;
       let number = document.getElementById('numberSmallerPrime').value;
       console.log(prime);
       console.log(number);
       if(prime != $PRIMEFORTHESTORY && number != $NUMBERFORTHESTORY){
        alert("both wrong");
       }else if(prime == $PRIMEFORTHESTORY && number != $NUMBERFORTHESTORY){
         alert("number wrong");
       }
       else if(prime != $PRIMEFORTHESTORY && number == $NUMBERFORTHESTORY){
         alert("prime wrong");
       } else if(prime == $PRIMEFORTHESTORY && number == $NUMBERFORTHESTORY){
         alert("Correct");
         $blocker=true;
       }

}

window.readLetter = function(){
  // remove the hide from hiddenblock
document.getElementById("hiddenBlock").style.display="block";
let stringForBase64 = $PRIMEFORTHESTORY+'#:#'+$NUMBERFORTHESTORY
//give hiddenbase64 the input
document.getElementById("hiddenBase64").textContent= btoa(stringForBase64);

}

window.evalueBAndCalculateA = function(){
    //small b
    let b = document.getElementById('bSmall').value;
    //Shared Information
    let big = document.getElementById('bBig').value;
    let prime = $PRIMEFORTHESTORY;
    let number = $NUMBERFORTHESTORY;
    // a from alice is b-1
    let a = b-1;
    let calculateBig= Math.pow(number,b)%prime;
    console.log(calculateBig);
    //check if big is right 
    if(big == calculateBig){
        alert("perfect!");
        window.abig= Math.pow(number,a)%prime;
        window.bsmall = b;
        window.bBig = big;
        $blocker= true;
    }else{
        alert("wrong");
    }
    
    

}
</script>
:: PGScene [bild]{"position":"175,700","size":"100,100"}
#Diffie Hellman The Game
(display:"Sidebar1")\
(set: $blocker to false)
<div class="storyteller">
{\(Your \: Public \: Key \: = \: g^s \: modulo \: p\)}

Do you want Bob to read the page? 
<input type="button" value="Read" onClick="window.readLetter()">
<div id="hiddenBlock" style="display: none;">
<span id="hiddenBase64">
</span>
Google("String with equal symbol at the end")
</div>
</div>

<div class="storyteller">
        <label for="prime">Prime</label>
        <input type="text" name="prime" class="long" id="prime" required/>
        <label for="numberSmallerPrime">Number</label>
        <input type="text" name="numberSmallerPrime" id="numberSmallerPrime"required />
        <button onclick="evaluatePrimeAndNumber()">Calculate</button>
(live: 1s)[(if: $blocker)[Great continue to the next page [[CalculateB |CalculateB]]]]  
</div>
:: CalculateB[bild]{"position":"175,700","size":"100,100"}
#Diffie Hellman The Game
(display:"Sidebar1")\
(set: $blocker to false)
<div class="storyteller">
Bob had to grin. Alice had told him the necessary P and G, now he just had to find her A. But where could the A be hidden?

His vibrating cell phone snapped him out of his thoughts. A number he didn't know had sent him a message with B? 

Bob must now calculate his B. 
The formula looks like this:
<span id ="bBigFormular"></span>
B = g^b mod p and b must be smaller than p
</div>


        <label for="bSmall">b:</label>
        <input type="text" name="bSmall" id="bSmall" required/>
        <label for="bBig">B:</label>
        <input type="text" name="bBig" id="bBig"required />
        <button onclick="evalueBAndCalculateA()">Send B</button>

 (live: 1s)[(if: $blocker)[Great continue to the next page [[FinalScene |FinalScene]]]] 
